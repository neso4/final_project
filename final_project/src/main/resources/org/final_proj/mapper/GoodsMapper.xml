<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.final_proj.mapper.GoodsMapper">


	<!--상품목록 -->
	<select id="getList" resultType="org.final_proj.domain.GoodsVO">
  	<![CDATA[
  	
  		select 	* from Goods
  		         
  	]]>
	</select>

	<!--검색페이지,tab 페이지 카테고리 구분 및 페이징처리 -->
	<select id="getListWithPaging"
		resultType="org.final_proj.domain.GoodsVO">
	  	<![CDATA[
	  	
	  		select 	* 
	  		from 
	  		(
	  		select rownum rn,goodsId,goodsName,price,weight,manufacturer,category,stock,image,ex
	  		from goods 			
	  	]]>	
	  		<where>
				<if test=" keyword != null and keyword != '' ">
					goodsName like '%' || #{keyword} || '%'
					or manufacturer like '%'|| #{keyword} || '%'
					
				</if>		
				<if test=" pageNum != null and pageNum != '' ">
					
				<![CDATA[		
					and rownum  <= #{pageNum} * #{amount} 
					]]>
				</if>						
			</where>
	  		)
	  		<![CDATA[
	  			where rn > (#{pageNum}-1) * #{amount}	
	  				 		         
	  		]]>
	  	
	</select>

	<!--상세페이지 조회 -->
	<select id="getDetail"
		resultType="org.final_proj.domain.GoodsVO">
  	<![CDATA[
  	
  		select 	* from Goods where goodsId = #{goodsId}
  	]]>
	</select>















</mapper>
  